version: 1
mode: agentic
context_window: full
source_paths:
  - app/
  - lib/
  - spec/
knowledge_files:
  - docs/product_brief.md
  - docs/architecture_brief.md
  - docs/memory.md
  - docs/todo.md

agents:
  - name: SpecWriter
    role: "Generate exhaustive, behavior-driven RSpec specs before any implementation."
    trigger: "when feature request or todo is added"
    rules: ["rules/specs.yml"]

  - name: Implementer
    role: "Implements minimal code required to pass specs. Optimizes for readability and performance."
    trigger: "when spec is defined and failing"
    rules: ["rules/architecture.yml", "rules/performance.yml"]

  - name: Refactorer
    role: "Refactors code for elegance and performance after all specs pass."
    trigger: "when all specs green"
    rules: ["rules/style.yml", "rules/performance.yml"]

  - name: Reviewer
    role: "Performs code review enforcing idempotent Darwin patterns, model reload safety, and clean schema state."
    trigger: "on PR or commit"
    rules: ["rules/architecture.yml"]