<div class="mx-auto flex max-w-5xl flex-col gap-8">
  <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <div class="space-y-1">
      <p class="text-xs font-semibold uppercase tracking-wide text-muted-foreground">Builder</p>
      <h1 class="text-2xl font-semibold text-foreground">New Model</h1>
    </div>
    <%= render "ui/navigation_menu/link", href: darwin.root_path, trigger_style: true do %>
      Back
    <% end %>
  </div>

  <%= form_with(model: @model, scope: :darwin_model, url: darwin.models_path) do |form| %>
    <div class="space-y-6">
      <% if @model.errors.any? %>
        <%= render "ui/alert", variant: :destructive do %>
          <%= render "ui/alert/title" do %>
            <%= pluralize(@model.errors.count, "error") %> prevented saving
          <% end %>
          <%= render "ui/alert/description" do %>
            <%= render "ui/list", classes: "text-destructive" do %>
              <% @model.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

      <% name_field_id = form.field_id(:name) %>
      <% name_field_name = form.field_name(:name) %>
      <%= render "ui/card", classes: "shadow-sm" do %>
        <%= render "ui/card/header" do %>
          <%= render "ui/card/title", content: "Model details" %>
        <% end %>
        <%= render "ui/card/content" do %>
          <%= render "ui/field" do %>
            <%= render "ui/field/label", for_id: name_field_id do %>
              Name
            <% end %>
            <%= render "ui/field/content" do %>
              <%= render "ui/input",
                          id: name_field_id,
                          name: name_field_name,
                          value: form.object.name,
                          placeholder: "Internal model name" %>
            <% end %>
            <% if form.object.errors[:name].any? %>
              <%= render "ui/field/error", content: form.object.errors.full_messages_for(:name).to_sentence %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>


      <div class="flex flex-wrap items-center justify-between gap-3">
        <%= render "ui/navigation_menu/link", href: darwin.root_path, trigger_style: true do %>
          Cancel
        <% end %>
        <%= render "ui/button", type: "submit" do %>
          Create Model
        <% end %>
      </div>
    </div>
  <% end %>
</div>
